<link rel="import" href="../../../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../digital-joystick/digital-joystick.html">
<link rel="import" href="../level-modifier-view/level-modifier-view.html">
<link rel="import" href="../animation-view/animation-view.html">

<dom-module id="view-picker">
  <template>
    <style>
      :host {
        display: inline-block;
        position: absolute;
        height: 100%;
        width: 100%;
      }
      :host([view=none]) .close-view {
        display: none;
      }
      .close-view {
        display: inline-block;
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 14px;
        z-index: 1;
      }
      .selection-text {
        text-align: center;
        margin-bottom: 10px;
      }
      .selection-section {
        display: inline-block;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
      }
      select {
        padding: 5px;
        text-align: center;
        outline: none;
        overflow: hidden;
      }
    </style>
    
    <!-- reset view -->
    <div class="close-view" on-click="resetView">CLOSE VIEW</div>
    
    <!-- selection -->
    <template is="dom-if" if="[[computeView('none', view)]]" restamp>
      <section class="selection-section">
        <div class="selection-text">Choose view to load...</div>
        <select value="{{view::change}}" multiple size="4">
          <option value="none">None</option>
          <option value="level-modifier-view">Level modifier view</option>
          <option value="animation-view">Animation logic</option>
          <option value="digital-joystick">Joystick demo</option>
        </select>
      </section>
    </template>
    
    <!-- level modifier view -->
    <template is="dom-if" if="[[computeView('level-modifier-view', view)]]" restamp>
      <level-modifier-view></level-modifier-view>
    </template>
    
    <!-- animation view -->
    <template is="dom-if" if="[[computeView('animation-view', view)]]" restamp>
      <animation-view></animation-view>
    </template>
    
    <!-- joystick demo -->
    <template is="dom-if" if="[[computeView('digital-joystick', view)]]" restamp>
      <digital-joystick></digital-joystick>
    </template>
    
  </template>

  <script>
    class viewPicker extends ReduxMixin(Polymer.Element) {
      static get is() { return 'view-picker'; }
      static get properties() {
        return {
          view: {
            type: String,
            value: 'none',
            reflectToAttribute: true
          }
        };
      }
      
      computeView(currView, view) {
        return currView == view;
      }
      
      resetView() {
        this.view = 'none';
      }

    }

    window.customElements.define(viewPicker.is, viewPicker);
  </script>
</dom-module>
