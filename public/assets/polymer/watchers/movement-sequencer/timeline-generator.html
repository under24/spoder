<!-- <link rel="import" href="../../../../../bower_components/polymer/polymer-element.html"> -->

<dom-module id="timeline-generator">
  <script>
    class timelineGenerator extends ReduxMixin(Polymer.Element) {
      static get is() { return 'timeline-generator'; }
      static get properties() {
        return {
          blueprint: {
            statePath: 'movement.iteration.blueprint'
          },
          tps: {
            statePath: 'movement.iteration.tps'
          },
          duration: {
            statePath: 'movement.iteration.duration'
          },
          amountOfTicks: {
            statePath: 'movement.iteration.amountOfTicks'
          },
          // output to the upper component <movement-sequencer>
          timeline: {
            notify: true
          }
        }
      }
      
      // generate a new timeline whenever this.blueprint || this.amountOfTicks
      static get observers() {
        return [ 'generateTimeline(blueprint, amountOfTicks)' ];
      }
      
      generateTimeline(blueprint, amountOfTicks) {
        this.timeline = SU.generateSequenceTimeline(blueprint, this.tps, this.duration, amountOfTicks).timeline;
      }

    }
    window.customElements.define(timelineGenerator.is, timelineGenerator);
  </script>
</dom-module>