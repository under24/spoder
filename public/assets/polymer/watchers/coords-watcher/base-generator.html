<dom-module id="base-generator">
  <script>
    class baseGenerator extends ReduxMixin(Polymer.Element) {
      static get is() { return 'base-generator'; }
      static get properties() {
        return {
          baseDirection: {
            statePath: 'base.direction'
          },
          baseCenterCoords: {
            statePath: 'base.centerCoords'
          }
        };
      }
      
      calcBaseCenterCoords(coords) {
        return RU.getBaseCenter(coords);
      }
      
      calcBaseDirection(coords, baseCenterCoords) {
        let baseDirection = MU.getAngle(coords[3].transverseBaseY - baseCenterCoords.y, coords[3].transverseBaseX - baseCenterCoords.x);
        
        return GU.correctAngle(baseDirection);
      }
      
      validateAndDispatchBaseDirection(payload) {
        // same values in the state. bail
        if (payload === this.baseDirection) return;
        
        store.dispatch({ type: "BASE_DIRECTION_CHANGED", payload });
      }
      
      validateAndDispatchBaseCenterCoords(payload) {
        // same values in the state. bail
        if (payload.x === this.baseCenterCoords.x && payload.y === this.baseCenterCoords.y) return;
        
        store.dispatch({ type: "BASE_CENTER_COORDS_CHANGED", payload });
      }

    }
    window.customElements.define(baseGenerator.is, baseGenerator);
  </script>
</dom-module>