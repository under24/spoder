<link rel="import" href="../../../../../bower_components/polymer/polymer-element.html">

<dom-module id="movement-settings">
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        height: 100%;
        position: relative;
        padding: 15px;
        box-sizing: border-box;
      }
      p {
        margin-left: 1em;
        margin-right: 1em;
      }
      fieldset {
        width: 95%;
        box-sizing: border-box;
        margin: 10px auto;
        border-width: 0px;
        border-style: hidden;
      }
    </style>
    
    <fieldset>
      <legend>Generator settings:</legend>
      <p>
        <label><input type="checkbox" checked="[[settings.movementGeneratorEnabled]]" value="movementGeneratorEnabled" on-click="handleCheckboxChange" /> Movement generator enabled</label>
      </p>
      <p>
        <label><input type="checkbox" checked="[[settings.loop]]" value="loop" on-click="handleCheckboxChange" /> Loop generator</label>
      </p>
      <p>
        <label><input type="checkbox" checked="[[settings.applyDirectionAndTurnAngles]]" value="applyDirectionAndTurnAngles" on-click="handleCheckboxChange" /> Apply direction and turn angles</label>
      </p>
    </fieldset>
    <fieldset>
      <legend>Iteration settings:</legend>
      <p>
        <input type="text" value="[[iteration.tps]]" size="8" /> Ticks per second (tps): 
      </p>
      <p>
        <input type="text" value="[[iteration.duration]]" size="8" /> Iteration duration (ms): 
      </p>
      <p>
        <input type="text" value="[[iteration.amountOfTicks]]" disabled size="8" /> Amount of ticks in iteration: 
      </p>
    </fieldset>

  </template>

  <script>
    class movementSettings extends ReduxMixin(Polymer.Element) {
      static get is() { return 'movement-settings'; }
      static get properties() {
        return {
          settings: {
            statePath: 'movement.settings'
          },
          iteration: {
            statePath: 'movement.iteration'
          }
        };
      }
      
      handleCheckboxChange(e) {
        store.dispatch({
          type: "MOVEMENT_SETTINGS_CHANGED",
          payload: { [e.target.value]: e.target.checked }
        });
      }

    }
    window.customElements.define(movementSettings.is, movementSettings);
  </script>
</dom-module>